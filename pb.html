<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cargando Dashboard</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/loader.css">
</head>
<body class="loading-screen">
    <div class="particles" id="particles"></div>
    
    <div class="loading-container" id="loadingContainer">
        <div class="logo">Cargando el dashboard SIL</div>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="percentage" id="percentage">0%</div>
        <div class="loading-text" id="loadingText">Iniciando sistema<span class="dots"></span></div>
    </div>

    <div class="dashboard" id="dashboard">
        <div class="dashboard-header">
            <div class="dashboard-title">Panel de Control</div>
        </div>
        <div class="dashboard-content">
            <div class="card">
                <h3>¡Bienvenido al Dashboard!</h3>
                <p>El sistema se ha cargado correctamente. Aquí puedes gestionar toda tu información.</p>
            </div>
            <div class="card">
                <h3>Estadísticas</h3>
                <p>Visualiza métricas y datos importantes en tiempo real.</p>
            </div>
            <div class="card">
                <h3>Configuración</h3>
                <p>Personaliza tu experiencia y ajusta las preferencias del sistema.</p>
            </div>
        </div>
    </div>

    <script>
        class LoadingScreen {
            constructor() {
                this.progress = 0;
                this.progressBar = document.getElementById('progressBar');
                this.percentage = document.getElementById('percentage');
                this.loadingText = document.getElementById('loadingText');
                this.loadingContainer = document.getElementById('loadingContainer');
                this.dashboard = document.getElementById('dashboard');
                
                this.loadingMessages = [
                    'Iniciando sistema',
                    'Cargando componentes',
                    'Conectando base de datos',
                    'Verificando permisos',
                    'Configurando interfaz',
                    'Optimizando rendimiento',
                    'Preparando dashboard',
                    'Finalizando carga'
                ];
                
                this.init();
            }

            init() {
                this.createParticles();
                this.startLoading();
            }

            createParticles() {
                const particlesContainer = document.getElementById('particles');
                const particleCount = 50;

                for (let i = 0; i < particleCount; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    
                    const size = Math.random() * 4 + 2;
                    const leftPosition = Math.random() * 100;
                    const animationDelay = Math.random() * 6;
                    const animationDuration = Math.random() * 3 + 3;
                    
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    particle.style.left = `${leftPosition}%`;
                    particle.style.animationDelay = `${animationDelay}s`;
                    particle.style.animationDuration = `${animationDuration}s`;
                    
                    particlesContainer.appendChild(particle);
                }
            }

            updateProgress(newProgress) {
                this.progress = Math.min(newProgress, 100);
                this.progressBar.style.width = `${this.progress}%`;
                this.percentage.textContent = `${Math.floor(this.progress)}%`;
                
                // Actualizar mensaje según el progreso
                const messageIndex = Math.floor((this.progress / 100) * (this.loadingMessages.length - 1));
                const currentMessage = this.loadingMessages[messageIndex] || this.loadingMessages[0];
                
                if (this.progress < 100) {
                    this.loadingText.innerHTML = `${currentMessage}<span class="dots"></span>`;
                } else {
                    this.loadingText.innerHTML = '¡Completado!';
                }
            }

            startLoading() {
                const duration = 4000; // 4 segundos
                const startTime = Date.now();
                
                const animate = () => {
                    const elapsed = Date.now() - startTime;
                    const progress = Math.min((elapsed / duration) * 100, 100);
                    
                    // Efecto de carga más realista con pausas ocasionales
                    let adjustedProgress = progress;
                    if (progress > 20 && progress < 30) {
                        adjustedProgress = 20 + (progress - 20) * 0.3; // Ralentizar en 20-30%
                    } else if (progress > 60 && progress < 80) {
                        adjustedProgress = 60 + (progress - 60) * 0.5; // Ralentizar en 60-80%
                    }
                    
                    this.updateProgress(adjustedProgress);
                    
                    if (progress < 100) {
                        requestAnimationFrame(animate);
                    } else {
                        // Pequeña pausa antes de mostrar el dashboard
                        setTimeout(() => {
                            this.showDashboard();
                        }, 500);
                    }
                };
                
                animate();
            }

            showDashboard() {
                this.loadingContainer.classList.add('fade-out');
                
                setTimeout(() => {
                    this.loadingContainer.style.display = 'none';
                    this.dashboard.classList.add('show');
                }, 500);
            }
        }

        // Inicializar cuando la página esté lista
        document.addEventListener('DOMContentLoaded', () => {
            new LoadingScreen();
        });

    </script>
</body>
</html>